function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}"undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty,t=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(t++ +"__")};n.prototype={set:function(t,n){var r=t[this.name];return r&&r[0]===t?r[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},"delete":function(e){var t=e[this.name];return t&&t[0]===e?(t[0]=t[1]=void 0,!0):!1},has:function(e){var t=e[this.name];return t?t[0]===e:!1}},window.WeakMap=n}(),function(e){function t(e){g.push(e),b||(b=!0,m(r))}function n(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function r(){b=!1;var e=g;g=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var n=e.takeRecords();o(e),n.length&&(e.callback_(n,e),t=!0)}),t&&r()}function o(e){e.nodes_.forEach(function(t){var n=v.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function i(e,t){for(var n=e;n;n=n.parentNode){var r=v.get(n);if(r)for(var o=0;o<r.length;o++){var i=r[o],a=i.options;if(n===e||a.subtree){var s=t(a);s&&i.enqueue(s)}}}}function a(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++E}function s(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function u(e){var t=new s(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function l(e,t){return _=new s(e,t)}function c(e){return O?O:(O=u(_),O.oldValue=e,O)}function d(){_=O=void 0}function f(e){return e===O||e===_}function p(e,t){return e===t?e:O&&f(e)?O:null}function h(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}if(!e.JsMutationObserver){var m,v=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var w=[],y=String(Math.random());window.addEventListener("message",function(e){if(e.data===y){var t=w;w=[],t.forEach(function(e){e()})}}),m=function(e){w.push(e),window.postMessage(y,"*")}}var b=!1,g=[],E=0;a.prototype={observe:function(e,t){if(e=n(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var r=v.get(e);r||v.set(e,r=[]);for(var o,i=0;i<r.length;i++)if(r[i].observer===this){o=r[i],o.removeListeners(),o.options=t;break}o||(o=new h(this,e,t),r.push(o),this.nodes_.push(e)),o.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=v.get(e),n=0;n<t.length;n++){var r=t[n];if(r.observer===this){r.removeListeners(),t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var _,O;h.prototype={enqueue:function(e){var n=this.observer.records_,r=n.length;if(n.length>0){var o=n[r-1],i=p(o,e);if(i)return void(n[r-1]=i)}else t(this.observer);n[r]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=v.get(e);t||v.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=v.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,r=e.target,o=new l("attributes",r);o.attributeName=t,o.attributeNamespace=n;var a=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;i(r,function(e){return!e.attributes||e.attributeFilter&&e.attributeFilter.length&&-1===e.attributeFilter.indexOf(t)&&-1===e.attributeFilter.indexOf(n)?void 0:e.attributeOldValue?c(a):o});break;case"DOMCharacterDataModified":var r=e.target,o=l("characterData",r),a=e.prevValue;i(r,function(e){return e.characterData?e.characterDataOldValue?c(a):o:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var s,u,f=e.target;"DOMNodeInserted"===e.type?(s=[f],u=[]):(s=[],u=[f]);var p=f.previousSibling,h=f.nextSibling,o=l("childList",e.target.parentNode);o.addedNodes=s,o.removedNodes=u,o.previousSibling=p,o.nextSibling=h,i(e.relatedNode,function(e){return e.childList?o:void 0})}d()}},e.JsMutationObserver=a,e.MutationObserver||(e.MutationObserver=a,a._isPolyfilled=!0)}}(self),function(e){"use strict";if(!window.performance){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return e?function(t){return e(function(){t(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}}());var n=function(){var e=document.createEvent("Event");return e.initEvent("foo",!0,!0),e.preventDefault(),e.defaultPrevented}();if(!n){var r=Event.prototype.preventDefault;Event.prototype.preventDefault=function(){this.cancelable&&(r.call(this),Object.defineProperty(this,"defaultPrevented",{get:function(){return!0},configurable:!0}))}}var o=/Trident/.test(navigator.userAgent);if((!window.CustomEvent||o&&"function"!=typeof window.CustomEvent)&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n},window.CustomEvent.prototype=window.Event.prototype),!window.Event||o&&"function"!=typeof window.Event){var i=window.Event;window.Event=function(e,t){t=t||{};var n=document.createEvent("Event");return n.initEvent(e,Boolean(t.bubbles),Boolean(t.cancelable)),n},window.Event.prototype=i.prototype}}(window.WebComponents),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,n=[],r=function(e){n.push(e)},o=function(){n.forEach(function(t){t(e)})};e.addModule=r,e.initializeModules=o,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){function t(e,t){n(e,function(e){return t(e)?!0:void r(e,t)}),r(e,t)}function n(e,t,r){var o=e.firstElementChild;if(!o)for(o=e.firstChild;o&&o.nodeType!==Node.ELEMENT_NODE;)o=o.nextSibling;for(;o;)t(o,r)!==!0&&n(o,t,r),o=o.nextElementSibling;return null}function r(e,n){for(var r=e.shadowRoot;r;)t(r,n),r=r.olderShadowRoot}function o(e,t){i(e,t,[])}function i(e,t,n){if(e=window.wrap(e),!(n.indexOf(e)>=0)){n.push(e);for(var r,o=e.querySelectorAll("link[rel="+a+"]"),s=0,u=o.length;u>s&&(r=o[s]);s++)r["import"]&&i(r["import"],t,n);t(e)}}var a=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";e.forDocumentTree=o,e.forSubtree=t}),window.CustomElements.addModule(function(e){function t(e,t){return n(e,t)||r(e,t)}function n(t,n){return e.upgrade(t,n)?!0:void(n&&a(t))}function r(e,t){b(e,function(e){return n(e,t)?!0:void 0})}function o(e){O.push(e),_||(_=!0,setTimeout(i))}function i(){_=!1;for(var e,t=O,n=0,r=t.length;r>n&&(e=t[n]);n++)e();O=[]}function a(e){E?o(function(){s(e)}):s(e)}function s(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback&&e.attachedCallback())}function u(e){l(e),b(e,function(e){l(e)})}function l(e){E?o(function(){c(e)}):c(e)}function c(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback&&e.detachedCallback())}function d(e){for(var t=e,n=window.wrap(document);t;){if(t==n)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}function f(e){if(e.shadowRoot&&!e.shadowRoot.__watched){y.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)m(t),t=t.olderShadowRoot}}function p(e,n){if(y.dom){var r=n[0];if(r&&"childList"===r.type&&r.addedNodes&&r.addedNodes){for(var o=r.addedNodes[0];o&&o!==document&&!o.host;)o=o.parentNode;var i=o&&(o.URL||o._URL||o.host&&o.host.localName)||"";i=i.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,i||"")}var a=d(e);n.forEach(function(e){"childList"===e.type&&(T(e.addedNodes,function(e){e.localName&&t(e,a)}),T(e.removedNodes,function(e){e.localName&&u(e)}))}),y.dom&&console.groupEnd()}function h(e){for(e=window.wrap(e),e||(e=window.wrap(document));e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(p(e,t.takeRecords()),i())}function m(e){if(!e.__observer){var t=new MutationObserver(p.bind(this,e));t.observe(e,{childList:!0,subtree:!0}),e.__observer=t}}function v(e){e=window.wrap(e),y.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop());var n=e===window.wrap(document);t(e,n),m(e),y.dom&&console.groupEnd()}function w(e){g(e,v)}var y=e.flags,b=e.forSubtree,g=e.forDocumentTree,E=window.MutationObserver._isPolyfilled&&y["throttle-attached"];e.hasPolyfillMutations=E,e.hasThrottledAttached=E;var _=!1,O=[],T=Array.prototype.forEach.call.bind(Array.prototype.forEach),M=Element.prototype.createShadowRoot;M&&(Element.prototype.createShadowRoot=function(){var e=M.call(this);return window.CustomElements.watchShadow(this),e}),e.watchShadow=f,e.upgradeDocumentTree=w,e.upgradeDocument=v,e.upgradeSubtree=r,e.upgradeAll=t,e.attached=a,e.takeRecords=h}),window.CustomElements.addModule(function(e){function t(t,r){if("template"===t.localName&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(t),!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var o=t.getAttribute("is"),i=e.getRegisteredDefinition(t.localName)||e.getRegisteredDefinition(o);if(i&&(o&&i.tag==t.localName||!o&&!i["extends"]))return n(t,i,r)}}function n(t,n,o){return a.upgrade&&console.group("upgrade:",t.localName),n.is&&t.setAttribute("is",n.is),r(t,n),t.__upgraded__=!0,i(t),o&&e.attached(t),e.upgradeSubtree(t,o),a.upgrade&&console.groupEnd(),t}function r(e,t){Object.__proto__?e.__proto__=t.prototype:(o(e,t.prototype,t["native"]),e.__proto__=t.prototype)}function o(e,t,n){for(var r={},o=t;o!==n&&o!==HTMLElement.prototype;){for(var i,a=Object.getOwnPropertyNames(o),s=0;i=a[s];s++)r[i]||(Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(o,i)),r[i]=1);o=Object.getPrototypeOf(o)}}function i(e){e.createdCallback&&e.createdCallback()}var a=e.flags;e.upgrade=t,e.upgradeWithDefinition=n,e.implementPrototype=r}),window.CustomElements.addModule(function(e){function t(t,r){var u=r||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(o(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(l(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return u.prototype||(u.prototype=Object.create(HTMLElement.prototype)),u.__name=t.toLowerCase(),u["extends"]&&(u["extends"]=u["extends"].toLowerCase()),u.lifecycle=u.lifecycle||{},u.ancestry=i(u["extends"]),a(u),s(u),n(u.prototype),c(u.__name,u),u.ctor=d(u),u.ctor.prototype=u.prototype,u.prototype.constructor=u.ctor,e.ready&&v(document),u.ctor}function n(e){if(!e.setAttribute._polyfilled){var t=e.setAttribute;e.setAttribute=function(e,n){r.call(this,e,n,t)};var n=e.removeAttribute;e.removeAttribute=function(e){r.call(this,e,null,n)},e.setAttribute._polyfilled=!0}}function r(e,t,n){e=e.toLowerCase();var r=this.getAttribute(e);n.apply(this,arguments);var o=this.getAttribute(e);this.attributeChangedCallback&&o!==r&&this.attributeChangedCallback(e,r,o)}function o(e){for(var t=0;t<E.length;t++)if(e===E[t])return!0}function i(e){var t=l(e);return t?i(t["extends"]).concat([t]):[]}function a(e){for(var t,n=e["extends"],r=0;t=e.ancestry[r];r++)n=t.is&&t.tag;e.tag=n||e.__name,n&&(e.is=e.__name)}function s(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var n=document.createElement(e.tag);t=Object.getPrototypeOf(n)}for(var r,o=e.prototype,i=!1;o;)o==t&&(i=!0),r=Object.getPrototypeOf(o),r&&(o.__proto__=r),o=r;i||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e["native"]=t}}function u(e){return y(T(e.tag),e)}function l(e){return e?_[e.toLowerCase()]:void 0}function c(e,t){_[e]=t}function d(e){return function(){return u(e)}}function f(e,t,n){return e===O?p(t,n):M(e,t)}function p(e,t){e&&(e=e.toLowerCase()),t&&(t=t.toLowerCase());var n=l(t||e);if(n){if(e==n.tag&&t==n.is)return new n.ctor;if(!t&&!n.is)return new n.ctor}var r;return t?(r=p(e),r.setAttribute("is",t),r):(r=T(e),e.indexOf("-")>=0&&b(r,HTMLElement),r)}function h(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments);return w(e),e}}var m,v=(e.isIE,e.upgradeDocumentTree),w=e.upgradeAll,y=e.upgradeWithDefinition,b=e.implementPrototype,g=e.useNative,E=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],_={},O="http://www.w3.org/1999/xhtml",T=document.createElement.bind(document),M=document.createElementNS.bind(document);m=Object.__proto__||g?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var n=e;n;){if(n===t.prototype)return!0;n=n.__proto__}return!1},h(Node.prototype,"cloneNode"),h(document,"importNode"),document.registerElement=t,document.createElement=p,document.createElementNS=f,e.registry=_,e["instanceof"]=m,e.reservedTagList=E,e.getRegisteredDefinition=l,document.register=document.registerElement}),function(e){function t(){i(window.wrap(document)),window.CustomElements.ready=!0;var e=window.requestAnimationFrame||function(e){setTimeout(e,16)};e(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=e.useNative,r=e.initializeModules;e.isIE;if(n){var o=function(){};e.watchShadow=o,e.upgrade=o,e.upgradeAll=o,e.upgradeDocumentTree=o,e.upgradeSubtree=o,e.takeRecords=o,e["instanceof"]=function(e,t){return e instanceof t}}else r();var i=e.upgradeDocumentTree,a=e.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e["import"]&&a(wrap(e["import"]))}),"complete"===document.readyState||e.flags.eager)t();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var s=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(s,t)}else t()}(window.CustomElements);var _slicedToArray=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(e){function t(e,t,n){var r=t.match(/^([a-zA-Z][a-zA-Z0-9_-]*)(.*)$/);if(r){var o=r[1],i=r[2];return u("rest: "+i),[e[o],i]}}function n(e,r,o){u("parsePath: "+r);var i=r.match(/^([a-zA-Z][a-zA-Z0-9_-]*)\.(.*)$/);if(i){var a=i[1],s=i[2];return u("parsePath: "+a+", "+s),n(e[a],s,o)}return t(e,r,o)}function r(e,t,n){var r=t.match(/^([1-9][0-9]*(?:\.[0-9]+)?)(.*)$/);return r?(u("parseNumber: "+t+". "+r+". ok"),[parseFloat(r[1],10),r[2]]):void u("parseNumber: "+t+". fail")}function o(e,t,o){var i=n(e,t,o);return i?i:r(e,t,o)}function i(e,t,n){if(t.startsWith("(")){t=t.substr(1);for(var r=[];;){var o=a(e,t,n);if(!o){u("No param: '"+t+"'");break}if(t=o[1],u("Got param: '"+o+"'"),r.push(o[0]),t=t.replace(/^\s*/,""),!t.startsWith(",")){u("No more comma. break. "+t);break}t=t.substr(1),t=t.replace(/^\s*/,"")}if(t=t.replace(/^\s*/,""),!t.startsWith(")"))throw"Paren missmatch: '"+t+"': '"+n+"'";if(t=t.substr(1),t=t.replace(/^\s*/,""),t.length>0)throw"There's trailing trash: "+n;return[r,t]}}function a(e,t,n){if(!t)throw"Missing path";var r=o(e,t,n);if(r){var a=_slicedToArray(r,2),s=a[0],l=a[1];if(l){u("got:"+s+", "+l);var c=i(e,l,n);return c?(u("apply: "+l),[s.apply(void 0,c[0]),c[1]]):[s,l]}return[s,l]}}function s(e,t){if(!t)throw"Missing path";u("getValueByPath: "+t);var n=a(e,t,t);if(n){if(n[1])throw"Trailing trash: '"+n[1]+"' in '"+t+"'";return n[0]}}var u=function(e){};e.sjExpression={getValueByPath:s}}("undefined"!=typeof global?global:window),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.IncrementalDOM={})}(this,function(e){"use strict";function t(e,t){this.attrs=a(),this.attrsArr=[],this.newAttrs=a(),this.key=t,this.keyMap=null,this.keyMapValid=!0,this.nodeName=e,this.text=null}function n(){this.created=T.nodesCreated&&[],this.deleted=T.nodesDeleted&&[]}var r=Object.prototype.hasOwnProperty,o=Object.create,i=function(e,t){return r.call(e,t)},a=function(){return o(null)},s=function(e,n,r){var o=new t(n,r);return e.__incrementalDOMData=o,o},u=function(e){var t=e.__incrementalDOMData;if(!t){var n=e.nodeName.toLowerCase(),r=null;e instanceof Element&&(r=e.getAttribute("key")),t=s(e,n,r)}return t},l={"default":"__default",placeholder:"__placeholder"},c=function(e){return 0===e.lastIndexOf("xml:",0)?"http://www.w3.org/XML/1998/namespace":0===e.lastIndexOf("xlink:",0)?"http://www.w3.org/1999/xlink":void 0},d=function(e,t,n){if(null==n)e.removeAttribute(t);else{var r=c(t);r?e.setAttributeNS(r,t,n):e.setAttribute(t,n)}},f=function(e,t,n){e[t]=n},p=function(e,t,n){if("string"==typeof n)e.style.cssText=n;else{e.style.cssText="";var r=e.style,o=n;for(var a in o)i(o,a)&&(r[a]=o[a])}},h=function(e,t,n){var r=typeof n;"object"===r||"function"===r?f(e,t,n):d(e,t,n)},m=function(e,t,n){var r=u(e),o=r.attrs;if(o[t]!==n){var i=v[t]||v[l["default"]];i(e,t,n),o[t]=n}},v=a();v[l["default"]]=h,v[l.placeholder]=function(){},v.style=p;var w=function(e,t){return"svg"===e?"http://www.w3.org/2000/svg":"foreignObject"===u(t).nodeName?null:t.namespaceURI},y=function(e,t,n,r,o){var i=w(n,t),a=void 0;if(a=i?e.createElementNS(i,n):e.createElement(n),s(a,n,r),o)for(var u=0;u<o.length;u+=2)m(a,o[u],o[u+1]);return a},b=function(e){var t=e.createTextNode("");return s(t,"#text",null),t},g=function(e){for(var t=a(),n=e.firstElementChild;n;){var r=u(n).key;r&&(t[r]=n),n=n.nextElementSibling}return t},E=function(e){var t=u(e);return t.keyMap||(t.keyMap=g(e)),t.keyMap},_=function(e,t){return t?E(e)[t]:null},O=function(e,t,n){E(e)[t]=n},T={nodesCreated:null,nodesDeleted:null};n.prototype.markCreated=function(e){this.created&&this.created.push(e)},n.prototype.markDeleted=function(e){this.deleted&&this.deleted.push(e)},n.prototype.notifyChanges=function(){this.created&&this.created.length>0&&T.nodesCreated(this.created),this.deleted&&this.deleted.length>0&&T.nodesDeleted(this.deleted)};var M=null,D=null,N=null,x=null,L=null,C=function(e){var t=function(t,r,o){var i=M,a=x,s=L,u=D,l=N;M=new n,x=t,L=t.ownerDocument,N=t.parentNode,e(t,r,o),M.notifyChanges(),M=i,x=a,L=s,D=u,N=l};return t},k=C(function(e,t,n){D=e,I(),t(n),H()}),P=C(function(e,t,n){D={nextSibling:e},t(n)}),A=function(e,t){var n=u(D);return e===n.nodeName&&t==n.key},S=function(e,t,n){if(!D||!A(e,t)){var r=void 0;t&&(r=_(N,t)),r||(r="#text"===e?b(L):y(L,N,e,t,n),t&&O(N,t,r),M.markCreated(r)),D&&u(D).key?(N.replaceChild(r,D),u(N).keyMapValid=!1):N.insertBefore(r,D),D=r}},j=function(){var e=N,t=u(e),n=t.keyMap,r=t.keyMapValid,o=e.lastChild,i=void 0;if(!(o===D&&r||t.attrs[l.placeholder]&&e!==x)){for(;o!==D;)e.removeChild(o),M.markDeleted(o),i=u(o).key,i&&delete n[i],o=e.lastChild;if(!r){for(i in n)o=n[i],o.parentNode!==e&&(M.markDeleted(o),delete n[i]);t.keyMapValid=!0}}},I=function(){N=D,D=null},R=function(){D=D?D.nextSibling:N.firstChild},H=function(){j(),D=N,N=N.parentNode},B=function(e,t,n){return R(),S(e,t,n),I(),N},F=function(){return H(),D},U=function(){return R(),S("#text",null,null),D},V=function(){return N},q=function(){D=N.lastChild},z=3,W=[],G=function(e,t,n){for(var r=B(e,t,n),o=u(r),i=o.attrsArr,a=o.newAttrs,s=!1,l=z,c=0;l<arguments.length;l+=1,c+=1)if(i[c]!==arguments[l]){s=!0;break}for(;l<arguments.length;l+=1,c+=1)i[c]=arguments[l];if(c<i.length&&(s=!0,i.length=c),s){for(l=z;l<arguments.length;l+=2)a[arguments[l]]=arguments[l+1];for(var d in a)m(r,d,a[d]),a[d]=void 0}return r},$=function(e,t,n){W[0]=e,W[1]=t,W[2]=n},J=function(e,t){W.push(e,t)},X=function(){var e=G.apply(null,W);return W.length=0,e},Z=function(){var e=F();return e},K=function(e){return G.apply(null,arguments),Z(e)},Y=function(e){return G.apply(null,arguments),q(),Z(e)},Q=function(e){var t=U(),n=u(t);if(n.text!==e){n.text=e;for(var r=e,o=1;o<arguments.length;o+=1){var i=arguments[o];r=i(r)}t.data=r}return t};e.patch=k,e.patchInner=k,e.patchOuter=P,e.currentElement=V,e.skip=q,e.elementVoid=K,e.elementOpenStart=$,e.elementOpenEnd=X,e.elementOpen=G,e.elementClose=Z,e.elementPlaceholder=Y,e.text=Q,e.attr=J,e.symbols=l,e.attributes=v,e.applyAttr=d,e.applyProp=f,e.notifications=T});var _slicedToArray=function(){function e(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(u){o=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(o)throw i}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(e){function t(e){return e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement}var n={"sj-click":"onclick","sj-blur":"onblur","sj-checked":"onchecked","sj-dblclick":"ondblclick","sj-focus":"onfocus","sj-keydown":"onkeydown","sj-keypress":"onkeypress","sj-keyup":"onkeyup","sj-mousedown":"onmousedown","sj-mouseenter":"onmouseenter","sj-mouseleave":"onmouseleave","sj-mousemove":"onmousemove","sj-mouseover":"onmouseover","sj-mouseup":"onmouseup","sj-paste":"onpaste","sj-selected":"onselected","sj-submit":"onsubmit"};if("function"!=typeof HTMLElement){var r=function(){};r.prototype=HTMLElement.prototype,HTMLElement=r}var o=function(e){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,Object.getPrototypeOf(r).apply(this,arguments))}return _inherits(r,e),_createClass(r,[{key:"createdCallback",value:function(){var e=this;this.initialized=!1,this.scope=new Proxy({},{set:function(t,n,r){return t[n]=r,e.initialized&&e.render(),!0}});var t=this.template(),n=document.createElement("div");n.innerHTML=t,this.templateElement=n,this.initialize(),this.initialized=!0,this.render()}},{key:"template",value:function(){throw"Please implement 'template' method"}},{key:"initialize",value:function(){}},{key:"render",value:function(){var e=this;if(!this.rendering)try{this.rendering=!0,IncrementalDOM.patch(this,function(){for(var t=e.templateElement.children,n=0;n<t.length;++n)e.renderDOM(t[n],e.scope)})}finally{this.rendering=!1}}},{key:"renderDOM",value:function(e,n){if(e instanceof Text)return void IncrementalDOM.text(this.replaceVariables(e.textContent,n));if(!this.shouldHideElement(e,n)){IncrementalDOM.elementOpenStart(e.tagName.toLowerCase());var r=this.renderAttributes(e,n),o=_slicedToArray(r,2),i=o[0],a=o[1],s=i?sjExpression.getValueByPath(n,i):null,u=t(e);i&&s&&n[i]&&u&&IncrementalDOM.attr("value",s),IncrementalDOM.elementOpenEnd(e.tagName.toLowerCase());var l=e.childNodes;if(!a)for(var c=0,d=l.length;d>c;++c){var f=l[c];f instanceof Text?i||IncrementalDOM.text(this.replaceVariables(f.textContent,n)):this.renderDOM(f,n)}i&&s&&!u&&IncrementalDOM.text(s),IncrementalDOM.elementClose(e.tagName.toLowerCase())}}},{key:"shouldHideElement",value:function(e,t){var n=e.getAttribute("sj-if");if(n){var r=sjExpression.getValueByPath(t,n);if(!r)return!0}return!1}},{key:"renderAttributes",value:function(e,t){for(var n=void 0,r=e.attributes,o=void 0,i=0,a=r.length;a>i;++i){var s=r[i],u=s.name,l=void 0,c=this.renderAttribute(u,s,e,t),d=_slicedToArray(c,2);l=d[0],o=d[1],l&&(n=s.value)}return[n,o]}},{key:"renderAttribute",value:function(e,t,r,o){var i=this,a=void 0,s=void 0;if(e.startsWith("sj-")){var u=n[e];if(u)IncrementalDOM.attr(u,function(e){i[t.value](e)});else if("sj-model"===t.name)a=t.value,IncrementalDOM.attr("onchange",function(e){o[t.value]=e.target.value,i.render()}),o[t.value]||(o[t.value]=r.value);else if("sj-for"===t.name){var l=t.value.match(/^\s*(\w+)\s+in\s+(\w+)\s*$/);if(!l)throw"Invalid sj-for value: "+l;s=!0;var c=l[1],d=l[2],f=r.querySelector("*"),p=!0,h=!1,m=void 0;try{for(var v,w=o[d][Symbol.iterator]();!(p=(v=w.next()).done);p=!0){var y=v.value,b=Object.assign({},o);b[c]=y,this.renderDOM(f,b)}}catch(g){h=!0,m=g}finally{try{!p&&w["return"]&&w["return"]()}finally{if(h)throw m}}}}else{var E=this.replaceVariables(t.value,o);IncrementalDOM.attr(t.name,E)}return[a,s]}},{key:"replaceVariables",value:function(e,t){return console.log(e),e.replace(/\{\{(\w+)\}\}/g,function(e,n){return t[n]})}}]),r}(HTMLElement);e.SJElement=o}("undefined"!=typeof global?global:window),window.customElements||(window.customElements={define:function(e,t){document.registerElement(e,t)}}),function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return m.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function i(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function u(e){var t=new FileReader;return t.readAsText(e),a(t)}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(m.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(m.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!m.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):m.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},m.blob?(this.blob=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=i(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=i(this);return e?e:Promise.resolve(this._bodyText)},m.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(e){var t=e.toUpperCase();return v.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(d.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=c(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(o))}}),t}function p(e){var t=new o,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),o=n.join(":").trim();t.append(r,o)}),t}function h(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var m={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,r){e=t(e),r=n(r);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(r)},o.prototype["delete"]=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[];
},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,r){this.map[t(e)]=[n(r)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},m.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var v=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this)},l.call(d.prototype),l.call(h.prototype),h.prototype.clone=function(){return new h(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},h.error=function(){var e=new h(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];h.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new h(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=d,e.Response=h,e.fetch=function(e,t){return new Promise(function(n,r){function o(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var i;i=d.prototype.isPrototypeOf(e)&&!t?e:new d(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:p(a),url:o()},t="response"in a?a.response:a.responseText;n(new h(t,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&m.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),function(e){function t(e){return e?"object"==typeof e||"function"==typeof e:!1}if(!e.Proxy){var n=null;e.Proxy=function(e,r){if(!t(e)||!t(r))throw new TypeError("Cannot create proxy with a non-object as target or handler");var o=function(){};n=function(){o=function(e){throw new TypeError("Cannot perform '"+e+"' on a proxy that has been revoked")}};var i=r;r={get:null,set:null,apply:null,construct:null};for(var a in i){if(!(a in r))throw new TypeError("Proxy polyfill does not support trap '"+a+"'");r[a]=i[a]}"function"==typeof i&&(r.apply=i.apply.bind(i));var s=this,u=!1,l="function"==typeof e;(r.apply||r.construct||l)&&(s=function(){var t=this&&this.constructor===s;if(o(t?"construct":"apply"),t&&r.construct)return r.construct.call(this,e,arguments);if(!t&&r.apply)return r.apply(e,this,arguments);if(l)return t?(t=Array.prototype.slice.call(arguments),t.unshift(e),new(e.bind.apply(e,t))):e.apply(this,arguments);throw new TypeError(t?"not a constructor":"not a function")},u=!0);var c=r.get?function(e){return o("get"),r.get(this,e,s)}:function(e){return o("get"),this[e]},d=r.set?function(e,t){o("set"),r.set(this,e,t,s)}:function(e,t){o("set"),this[e]=t},f={};if(Object.getOwnPropertyNames(e).forEach(function(t){if(!(u&&t in s)){var n={enumerable:!!Object.getOwnPropertyDescriptor(e,t).enumerable,get:c.bind(e,t),set:d.bind(e,t)};Object.defineProperty(s,t,n),f[t]=!0}}),i=!0,Object.setPrototypeOf?Object.setPrototypeOf(s,Object.getPrototypeOf(e)):s.__proto__?s.__proto__=e.__proto__:i=!1,r.get||!i)for(var p in e)f[p]||Object.defineProperty(s,p,{get:c.bind(e,p)});return Object.seal(e),Object.seal(s),s},e.Proxy.revocable=function(t,r){return{proxy:new e.Proxy(t,r),revoke:n}},e.Proxy.revocable=e.Proxy.revocable,e.Proxy=e.Proxy}}(window);